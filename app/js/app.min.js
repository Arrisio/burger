const menuBtn = document.querySelector('.hamburger-menu-link'),
	hamMenu = document.getElementById('hamburger-menu'),
	hamList = document.getElementById('nav__list_hamburger'),
	body = document.querySelector('body');
hamListItems = document.querySelectorAll('.nav_hamburger .nav__item');


function аsleep(ms) {
	return new Promise(resolve => setTimeout(resolve, ms));
}
async function toggleMenu() {
	menuBtn.classList.toggle('is-active');
	body.classList.toggle('is-locked');
	hamMenu.classList.toggle('is-active');

	for (var i = 0; i < hamListItems.length; ++i) {
		hamListItems[i].classList.toggle('is-active');
		await sleep(100);
	};
};

menuBtn.addEventListener('click', function (e) {
	e.preventDefault();
	toggleMenu();
});
hamList.addEventListener('click', function (e) {
	let el = e.target;
	if (el.tagName == 'A') {
		toggleMenu();
	};
});

document.addEventListener("keydown", function (e) {
	if (e.keyCode == 27 && hamMenu.classList.contains('is-active')) {
		toggleMenu();
	}
});


allAccordions = document.querySelectorAll('.accordion');

function findParentAccordion(elt) {
	let i = 0; // защита от зациклавания
	while (!(elt.classList.contains('accordion')) && i < 100) {
		elt = elt.parentNode;
	}
	return elt;
};

for (let iAccord = 0; iAccord < allAccordions.length; iAccord++) {
	accordMenu = allAccordions[iAccord].getElementsByTagName("A");
	for (let iItem = 0; iItem < accordMenu.length; iItem++) {

		accordMenu[iItem].addEventListener('click', function (e) {
			e.preventDefault();
			clickedAccordMenuItems = findParentAccordion(this).getElementsByTagName("LI");
			parentLi = this.parentNode;
			for (let i = 0; i < clickedAccordMenuItems.length; i++) {
				if (parentLi == clickedAccordMenuItems[i]) {
					clickedAccordMenuItems[i].classList.toggle('is-active');
					console.log('toggle', clickedAccordMenuItems[i]);
				} else {
					clickedAccordMenuItems[i].classList.remove('is-active');
					console.log('rm', clickedAccordMenuItems[i]);
				}
			}
		});

	}
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXItbWVudS1saW5rJyksXHJcblx0aGFtTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoYW1idXJnZXItbWVudScpLFxyXG5cdGhhbUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2X19saXN0X2hhbWJ1cmdlcicpLFxyXG5cdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbmhhbUxpc3RJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfaGFtYnVyZ2VyIC5uYXZfX2l0ZW0nKTtcclxuXHJcblxyXG5mdW5jdGlvbiDQsHNsZWVwKG1zKSB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XHJcblx0bWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcclxuXHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWxvY2tlZCcpO1xyXG5cdGhhbU1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcblxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgaGFtTGlzdEl0ZW1zLmxlbmd0aDsgKytpKSB7XHJcblx0XHRoYW1MaXN0SXRlbXNbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcblx0XHRhd2FpdCBzbGVlcCgxMDApO1xyXG5cdH07XHJcbn07XHJcblxyXG5tZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0dG9nZ2xlTWVudSgpO1xyXG59KTtcclxuaGFtTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblx0bGV0IGVsID0gZS50YXJnZXQ7XHJcblx0aWYgKGVsLnRhZ05hbWUgPT0gJ0EnKSB7XHJcblx0XHR0b2dnbGVNZW51KCk7XHJcblx0fTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xyXG5cdGlmIChlLmtleUNvZGUgPT0gMjcgJiYgaGFtTWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKSB7XHJcblx0XHR0b2dnbGVNZW51KCk7XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5hbGxBY2NvcmRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlvbicpO1xyXG5cclxuZnVuY3Rpb24gZmluZFBhcmVudEFjY29yZGlvbihlbHQpIHtcclxuXHRsZXQgaSA9IDA7IC8vINC30LDRidC40YLQsCDQvtGCINC30LDRhtC40LrQu9Cw0LLQsNC90LjRj1xyXG5cdHdoaWxlICghKGVsdC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlvbicpKSAmJiBpIDwgMTAwKSB7XHJcblx0XHRlbHQgPSBlbHQucGFyZW50Tm9kZTtcclxuXHR9XHJcblx0cmV0dXJuIGVsdDtcclxufTtcclxuXHJcbmZvciAobGV0IGlBY2NvcmQgPSAwOyBpQWNjb3JkIDwgYWxsQWNjb3JkaW9ucy5sZW5ndGg7IGlBY2NvcmQrKykge1xyXG5cdGFjY29yZE1lbnUgPSBhbGxBY2NvcmRpb25zW2lBY2NvcmRdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiQVwiKTtcclxuXHRmb3IgKGxldCBpSXRlbSA9IDA7IGlJdGVtIDwgYWNjb3JkTWVudS5sZW5ndGg7IGlJdGVtKyspIHtcclxuXHJcblx0XHRhY2NvcmRNZW51W2lJdGVtXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0Y2xpY2tlZEFjY29yZE1lbnVJdGVtcyA9IGZpbmRQYXJlbnRBY2NvcmRpb24odGhpcykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJMSVwiKTtcclxuXHRcdFx0cGFyZW50TGkgPSB0aGlzLnBhcmVudE5vZGU7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2xpY2tlZEFjY29yZE1lbnVJdGVtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChwYXJlbnRMaSA9PSBjbGlja2VkQWNjb3JkTWVudUl0ZW1zW2ldKSB7XHJcblx0XHRcdFx0XHRjbGlja2VkQWNjb3JkTWVudUl0ZW1zW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RvZ2dsZScsIGNsaWNrZWRBY2NvcmRNZW51SXRlbXNbaV0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjbGlja2VkQWNjb3JkTWVudUl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3JtJywgY2xpY2tlZEFjY29yZE1lbnVJdGVtc1tpXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG59OyJdfQ==
